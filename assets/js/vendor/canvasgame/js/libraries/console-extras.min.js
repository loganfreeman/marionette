/*! console-extras - v0.1 - 2013-01-26
* Copyright (c) 2013 Steven Wittens; Licensed  */
(function(e){e.__getCallID=function(e){var t=(new Error).stack;if(t){var n=t.split(/\n/g),r=!1,s=0;e++;for(i in n){if(s==e)return n[i];!r&&n[i].match(/getCallID/)&&(r=!0),r&&s++}}return"exception"}})(console),function(e){var t={},n={},r=Object.create(e);for(i in e)(function(i,s){r[s]=function(){var r=this.__id,i=n[r]||0,o=+(new Date);if(o-i>=this.__throttle){n[r]=o;var u=t[r]||0;if(u<this.__limit){t[r]=u+1;var a=e[s].consoleExtras?this:e;e[s].apply(a,arguments)}}return this}})(e[i],i);e.times=function(t){var n=Object.create(r);return n.__id=this.__id||e.__getCallID(1),n.__limit=t,n.__throttle=this.__throttle||0,n},e.times.consoleExtras=!0,e.throttle=function(t){var n=Object.create(r);return n.__id=this.__id||e.__getCallID(1),n.__limit=this.__limit||Infinity,n.__throttle=t,n},e.throttle.consoleExtras=!0}(console),function(e){function n(){this.x=0,this.x2=0,this.strings=[],this.children=[],this.classes={},this.count=0}var t={},r=Object.create(e);e.collate=function(){function a(e,t){e=e||new n;var r=typeof t;t instanceof Array&&(r="array");switch(r){case"number":e.x+=t,e.x2+=t*t,e.count++;break;case"array":t.forEach(function(t,n){e.children[n]=a(e.children[n],t)});break;case"string":e.strings[t]=(e.strings[t]||0)+1;break;case"object":var s=t.constructor&&t.constructor.name||"Object";r=e.classes[s]||{count:0,properties:{}},r.count++;for(i in t)(function(e,t){r.properties[t]=a(r.properties[t],e)})(t[i],i);e.classes[s]=r;break;default:return}return e}var s=Array.prototype.slice.apply(arguments),o=this.__id||e.__getCallID(0),u=t[o]=t[o]||[];s.forEach(function(e,t){u[t]=a(u[t],e)});var f=Object.create(r);return f.__id=o,f.__limit=Infinity,f.__throttle=0,f},e.collate.consoleExtras=!0,e.summary=function(){setTimeout(function(){var n=this.__id||e.__getCallID(0),r=t[n]=t[n]||[],s=[];for(i in r)s.push(r[i].toOutput("",i+": "));delete t[n],e.log(s.join("\n"))}.bind(this),0)},e.summary.consoleExtras=!0,n.prototype.toOutput=function(e,t){var n=[],r=!1;if(this.count){var i=1/Math.max(1,this.count),s=this.x*i,o=Math.sqrt((this.x2-this.x*s)*i);function u(e){return Math.round(e*100)/100}n.push(e+t+u(s)+" ± "+u(o)+" (×"+this.count+")")}else n.push(e+t);for(var a in this.strings){var f=this.strings[a];a.length>32&&(a=a.substring(0,32)+"..."),n.push(e+'  "'+a+'" (×'+this.strings[a]+")")}if(this.children.length){n.push(e+"  Array");for(var l in this.children)n.push(this.children[l].toOutput(e+"    ",l+": "))}for(klass in this.classes){var c=this.classes[klass];n.push(e+"  "+klass+" (×"+c.count+")");for(var l in c.properties)n.push(c.properties[l].toOutput(e+"    ",l+": "))}return n.join("\n")}}(console);